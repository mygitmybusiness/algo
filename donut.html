<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Donut JS</title>
    <style>
        body {
            background-color: black;
            color: white;
            font-family: monospace;
            white-space: pre;
            font-size: 12px;
        }
        #donut {
            line-height: 10px;
        }
    </style>
</head>
<body>
    <div id="donut"></div>

    <script>
        let A = 0, B = 0;
        let size = parseInt(prompt("Enter size (1-10): ", "5"));
        let colorInput = prompt("Enter color (e.g., red, green, blue): ", "white");

        const R1 = 1;
        let R2 = 2 + (size - 5) * 0.2;
        const K2 = 5;
        const K1 = 10 / (R1 + R2);

        const screenWidth = 80;
        const screenHeight = 22;

        const b = new Array(1760).fill(' ');
        const z = new Array(1760).fill(0);

        const donutElement = document.getElementById("donut");

        function renderFrame() {
            b.fill(' ');
            z.fill(0);

            for (let j = 0; j < 6.28; j += 0.07) {
                for (let i = 0; i < 6.28; i += 0.02) {
                    const c = Math.sin(i), d = Math.cos(j), e = Math.sin(A), f = Math.sin(j),
                          g = Math.cos(A), h = d + 2, D = 1 / (c * h * e + f * g + 5),
                          l = Math.cos(i), m = Math.cos(B), n = Math.sin(B),
                          t = c * h * g - f * e;

                    const x = Math.floor(40 + 30 * D * (l * h * m - t * n));
                    const y = Math.floor(12 + 15 * D * (l * h * n + t * m));
                    const o = x + screenWidth * y;
                    const N = Math.floor(8 * ((f * e - c * d * g) * m - c * d * e - f * g - l * d * n));

                    if (y < screenHeight && y >= 0 && x >= 0 && x < screenWidth && D > z[o]) {
                        z[o] = D;
                        b[o] = ".,-~:;=!*#$@"[N > 0 ? N : 0];
                    }
                }
            }

            let output = '';
            for (let k = 0; k < 1760; k++) {
                output += (k % 80) ? `<span style="color: ${colorInput}">${b[k]}</span>` : '\n';
            }

            donutElement.innerHTML = output;

            // SLOWER SPEED:
            A += 0.01;
            B += 0.01;

            requestAnimationFrame(renderFrame);
        }

        renderFrame();
    </script>
</body>
</html>
